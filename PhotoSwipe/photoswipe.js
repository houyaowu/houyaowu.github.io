// build time:Wed Aug 01 2018 21:53:03 GMT+0800 (中国标准时间)
(function(e,i){if(typeof define==="function"&&define.amd){define(i)}else if(typeof exports==="object"){module.exports=i()}else{e.PhotoSwipe=i()}})(this,function(){"use strict";var e=function(e,i,t,n){var o={features:null,bind:function(e,i,t,n){var o=(n?"remove":"add")+"EventListener";i=i.split(" ");for(var r=0;r<i.length;r++){if(i[r]){e[o](i[r],t,false)}}},isArray:function(e){return e instanceof Array},createEl:function(e,i){var t=document.createElement(i||"div");if(e){t.className=e}return t},getScrollY:function(){var e=window.pageYOffset;return e!==undefined?e:document.documentElement.scrollTop},unbind:function(e,i,t){o.bind(e,i,t,true)},removeClass:function(e,i){var t=new RegExp("(\\s|^)"+i+"(\\s|$)");e.className=e.className.replace(t," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(e,i){if(!o.hasClass(e,i)){e.className+=(e.className?" ":"")+i}},hasClass:function(e,i){return e.className&&new RegExp("(^|\\s)"+i+"(\\s|$)").test(e.className)},getChildByClass:function(e,i){var t=e.firstChild;while(t){if(o.hasClass(t,i)){return t}t=t.nextSibling}},arraySearch:function(e,i,t){var n=e.length;while(n--){if(e[n][t]===i){return n}}return-1},extend:function(e,i,t){for(var n in i){if(i.hasOwnProperty(n)){if(t&&e.hasOwnProperty(n)){continue}e[n]=i[n]}}},easing:{sine:{out:function(e){return Math.sin(e*(Math.PI/2))},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(o.features){return o.features}var e=o.createEl(),i=e.style,t="",n={};n.oldIE=document.all&&!document.addEventListener;n.touch="ontouchstart"in window;if(window.requestAnimationFrame){n.raf=window.requestAnimationFrame;n.caf=window.cancelAnimationFrame}n.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled;if(!n.pointerEvent){var r=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);if(a&&a.length>0){a=parseInt(a[1],10);if(a>=1&&a<8){n.isOldIOSPhone=true}}}var l=r.match(/Android\s([0-9\.]*)/);var s=l?l[1]:0;s=parseFloat(s);if(s>=1){if(s<4.4){n.isOldAndroid=true}n.androidVersion=s}n.isMobileOpera=/opera mini|opera mobi/i.test(r)}var f=["transform","perspective","animationName"],u=["","webkit","Moz","ms","O"],c,d;for(var p=0;p<4;p++){t=u[p];for(var m=0;m<3;m++){c=f[m];d=t+(t?c.charAt(0).toUpperCase()+c.slice(1):c);if(!n[c]&&d in i){n[c]=d}}if(t&&!n.raf){t=t.toLowerCase();n.raf=window[t+"RequestAnimationFrame"];if(n.raf){n.caf=window[t+"CancelAnimationFrame"]||window[t+"CancelRequestAnimationFrame"]}}}if(!n.raf){var h=0;n.raf=function(e){var i=(new Date).getTime();var t=Math.max(0,16-(i-h));var n=window.setTimeout(function(){e(i+t)},t);h=i+t;return n};n.caf=function(e){clearTimeout(e)}}n.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect;o.features=n;return n}};o.detectFeatures();if(o.features.oldIE){o.bind=function(e,i,t,n){i=i.split(" ");var o=(n?"detach":"attach")+"Event",r,a=function(){t.handleEvent.call(t)};for(var l=0;l<i.length;l++){r=i[l];if(r){if(typeof t==="object"&&t.handleEvent){if(!n){t["oldIE"+r]=a}else{if(!t["oldIE"+r]){return false}}e[o]("on"+r,t["oldIE"+r])}else{e[o]("on"+r,t)}}}}}var r=this;var a=25,l=3;var s={allowPanToNext:true,spacing:.12,bgOpacity:1,mouseUsed:false,loop:true,pinchToClose:true,closeOnScroll:true,closeOnVerticalDrag:true,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:false,focus:true,escKey:true,arrowKeys:true,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(e){return e.tagName==="A"},getDoubleTapZoom:function(e,i){if(e){return 1}else{return i.initialZoomLevel<.7?1:1.33}},maxSpreadZoom:1.33,modal:true,scaleMode:"fit"};o.extend(s,n);var f=function(){return{x:0,y:0}};var u,c,d,p,m,h,v=f(),y=f(),x=f(),g,w,b,I={},C,D,M,T,S,A,E=0,O={},k=f(),R,Z,P=0,F,L,_,z,N,U,H=true,Y,B=[],W,G,X,V,K,q,$,j={},J=false,Q=function(e,i){o.extend(r,i.publicMethods);B.push(e)},ee=function(e){var i=nt();if(e>i-1){return e-i}else if(e<0){return i+e}return e},ie={},te=function(e,i){if(!ie[e]){ie[e]=[]}return ie[e].push(i)},ne=function(e){var i=ie[e];if(i){var t=Array.prototype.slice.call(arguments);t.shift();for(var n=0;n<i.length;n++){i[n].apply(r,t)}}},oe=function(){return(new Date).getTime()},re=function(e){xi=e;r.bg.style.opacity=e*s.bgOpacity},ae=function(e,i,t,n,o){if(!J||o&&o!==r.currItem){n=n/(o?o.fitRatio:r.currItem.fitRatio)}e[N]=M+i+"px, "+t+"px"+T+" scale("+n+")"},le=function(e){if(ci){if(e){if(C>r.currItem.fitRatio){if(!J){ct(r.currItem,false,true);J=true}}else{if(J){ct(r.currItem);J=false}}}ae(ci,x.x,x.y,C)}},se=function(e){if(e.container){ae(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)}},fe=function(e,i){i[N]=M+e+"px, 0px"+T},ue=function(e,i){if(!s.loop&&i){var t=p+(k.x*E-e)/k.x,n=Math.round(e-ui.x);if(t<0&&n>0||t>=nt()-1&&n<0){e=ui.x+n*s.mainScrollEndFriction}}ui.x=e;fe(e,m)},ce=function(e,i){var t=pi[e]-O[e];return y[e]+v[e]+t-t*(i/D)},de=function(e,i){e.x=i.x;e.y=i.y;if(i.id){e.id=i.id}},pe=function(e){e.x=Math.round(e.x);e.y=Math.round(e.y)},me=null,he=function(){if(me){o.unbind(document,"mousemove",he);o.addClass(e,"pswp--has_mouse");s.mouseUsed=true;ne("mouseUsed")}me=setTimeout(function(){me=null},100)},ve=function(){o.bind(document,"keydown",r);if($.transform){o.bind(r.scrollWrap,"click",r)}if(!s.mouseUsed){o.bind(document,"mousemove",he)}o.bind(window,"resize scroll",r);ne("bindEvents")},ye=function(){o.unbind(window,"resize",r);o.unbind(window,"scroll",b.scroll);o.unbind(document,"keydown",r);o.unbind(document,"mousemove",he);if($.transform){o.unbind(r.scrollWrap,"click",r)}if(Qe){o.unbind(window,g,r)}ne("unbindEvents")},xe=function(e,i){var t=lt(r.currItem,I,e);if(i){fi=t}return t},ge=function(e){if(!e){e=r.currItem}return e.initialZoomLevel},we=function(e){if(!e){e=r.currItem}return e.w>0?s.maxSpreadZoom:1},be=function(e,i,t,n){if(n===r.currItem.initialZoomLevel){t[e]=r.currItem.initialPosition[e];return true}else{t[e]=ce(e,n);if(t[e]>i.min[e]){t[e]=i.min[e];return true}else if(t[e]<i.max[e]){t[e]=i.max[e];return true}}return false},Ie=function(){if(N){var i=$.perspective&&!Y;M="translate"+(i?"3d(":"(");T=$.perspective?", 0px)":")";return}N="left";o.addClass(e,"pswp--ie");fe=function(e,i){i.left=e+"px"};se=function(e){var i=e.fitRatio>1?1:e.fitRatio,t=e.container.style,n=i*e.w,o=i*e.h;t.width=n+"px";t.height=o+"px";t.left=e.initialPosition.x+"px";t.top=e.initialPosition.y+"px"};le=function(){if(ci){var e=ci,i=r.currItem,t=i.fitRatio>1?1:i.fitRatio,n=t*i.w,o=t*i.h;e.width=n+"px";e.height=o+"px";e.left=x.x+"px";e.top=x.y+"px"}}},Ce=function(e){var i="";if(s.escKey&&e.keyCode===27){i="close"}else if(s.arrowKeys){if(e.keyCode===37){i="prev"}else if(e.keyCode===39){i="next"}}if(i){if(!e.ctrlKey&&!e.altKey&&!e.shiftKey&&!e.metaKey){if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}r[i]()}}},De=function(e){if(!e){return}if(ti||ii||di||Ke){e.preventDefault();e.stopPropagation()}},Me=function(){r.setScrollOffset(0,o.getScrollY())};var Te={},Se=0,Ae=function(e){if(Te[e]){if(Te[e].raf){G(Te[e].raf)}Se--;delete Te[e]}},Ee=function(e){if(Te[e]){Ae(e)}if(!Te[e]){Se++;Te[e]={}}},Oe=function(){for(var e in Te){if(Te.hasOwnProperty(e)){Ae(e)}}},ke=function(e,i,t,n,o,r,a){var l=oe(),s;Ee(e);var f=function(){if(Te[e]){s=oe()-l;if(s>=n){Ae(e);r(t);if(a){a()}return}r((t-i)*o(s/n)+i);Te[e].raf=W(f)}};f()};var Re={shout:ne,listen:te,viewportSize:I,options:s,isMainScrollAnimating:function(){return di},getZoomLevel:function(){return C},getCurrentIndex:function(){return p},isDragging:function(){return Qe},isZooming:function(){return ai},setScrollOffset:function(e,i){O.x=e;q=O.y=i;ne("updateScrollOffset",O)},applyZoomPan:function(e,i,t,n){x.x=i;x.y=t;C=e;le(n)},init:function(){if(u||c){return}var t;r.framework=o;r.template=e;r.bg=o.getChildByClass(e,"pswp__bg");X=e.className;u=true;$=o.detectFeatures();W=$.raf;G=$.caf;N=$.transform;K=$.oldIE;r.scrollWrap=o.getChildByClass(e,"pswp__scroll-wrap");r.container=o.getChildByClass(r.scrollWrap,"pswp__container");m=r.container.style;r.itemHolders=R=[{el:r.container.children[0],wrap:0,index:-1},{el:r.container.children[1],wrap:0,index:-1},{el:r.container.children[2],wrap:0,index:-1}];R[0].el.style.display=R[2].el.style.display="none";Ie();b={resize:r.updateSize,scroll:Me,keydown:Ce,click:De};var n=$.isOldIOSPhone||$.isOldAndroid||$.isMobileOpera;if(!$.animationName||!$.transform||n){s.showAnimationDuration=s.hideAnimationDuration=0}for(t=0;t<B.length;t++){r["init"+B[t]]()}if(i){var a=r.ui=new i(r,o);a.init()}ne("firstUpdate");p=p||s.index||0;if(isNaN(p)||p<0||p>=nt()){p=0}r.currItem=tt(p);if($.isOldIOSPhone||$.isOldAndroid){H=false}e.setAttribute("aria-hidden","false");if(s.modal){if(!H){e.style.position="absolute";e.style.top=o.getScrollY()+"px"}else{e.style.position="fixed"}}if(q===undefined){ne("initialLayout");q=V=o.getScrollY()}var f="pswp--open ";if(s.mainClass){f+=s.mainClass+" "}if(s.showHideOpacity){f+="pswp--animate_opacity "}f+=Y?"pswp--touch":"pswp--notouch";f+=$.animationName?" pswp--css_animation":"";f+=$.svg?" pswp--svg":"";o.addClass(e,f);r.updateSize();h=-1;P=null;for(t=0;t<l;t++){fe((t+h)*k.x,R[t].el.style)}if(!K){o.bind(r.scrollWrap,w,r)}te("initialZoomInEnd",function(){r.setContent(R[0],p-1);r.setContent(R[2],p+1);R[0].el.style.display=R[2].el.style.display="block";if(s.focus){e.focus()}ve()});r.setContent(R[1],p);r.updateCurrItem();ne("afterInit");if(!H){S=setInterval(function(){if(!Se&&!Qe&&!ai&&C===r.currItem.initialZoomLevel){r.updateSize()}},1e3)}o.addClass(e,"pswp--visible")},close:function(){if(!u){return}u=false;c=true;ne("close");ye();qi(r.currItem,null,true,r.destroy)},destroy:function(){ne("destroy");if(Ki){clearTimeout(Ki)}e.setAttribute("aria-hidden","true");e.className=X;if(S){clearInterval(S)}o.unbind(r.scrollWrap,w,r);o.unbind(window,"scroll",r);Ci();Oe();ie=null},panTo:function(e,i,t){if(!t){if(e>fi.min.x){e=fi.min.x}else if(e<fi.max.x){e=fi.max.x}if(i>fi.min.y){i=fi.min.y}else if(i<fi.max.y){i=fi.max.y}}x.x=e;x.y=i;le()},handleEvent:function(e){e=e||window.event;if(b[e.type]){b[e.type](e)}},goTo:function(e){e=ee(e);var i=e-p;P=i;p=e;r.currItem=tt(p);E-=i;ue(k.x*E);Oe();di=false;r.updateCurrItem()},next:function(){r.goTo(p+1)},prev:function(){r.goTo(p-1)},updateCurrZoomItem:function(e){if(e){ne("beforeChange",0)}if(R[1].el.children.length){var i=R[1].el.children[0];if(o.hasClass(i,"pswp__zoom-wrap")){ci=i.style}else{ci=null}}else{ci=null}fi=r.currItem.bounds;D=C=r.currItem.initialZoomLevel;x.x=fi.center.x;x.y=fi.center.y;if(e){ne("afterChange")}},invalidateCurrItems:function(){A=true;for(var e=0;e<l;e++){if(R[e].item){R[e].item.needsUpdate=true}}},updateCurrItem:function(e){if(P===0){return}var i=Math.abs(P),t;if(e&&i<2){return}r.currItem=tt(p);J=false;ne("beforeChange",P);if(i>=l){h+=P+(P>0?-l:l);i=l}for(var n=0;n<i;n++){if(P>0){t=R.shift();R[l-1]=t;h++;fe((h+2)*k.x,t.el.style);r.setContent(t,p-i+n+1+1)}else{t=R.pop();R.unshift(t);h--;fe(h*k.x,t.el.style);r.setContent(t,p+i-n-1-1)}}if(ci&&Math.abs(P)===1){var o=tt(Z);if(o.initialZoomLevel!==C){lt(o,I);ct(o);se(o)}}P=0;r.updateCurrZoomItem();Z=p;ne("afterChange")},updateSize:function(i){if(!H&&s.modal){var t=o.getScrollY();if(q!==t){e.style.top=t+"px";q=t}if(!i&&j.x===window.innerWidth&&j.y===window.innerHeight){return}j.x=window.innerWidth;j.y=window.innerHeight;e.style.height=j.y+"px"}I.x=r.scrollWrap.clientWidth;I.y=r.scrollWrap.clientHeight;Me();k.x=I.x+Math.round(I.x*s.spacing);k.y=I.y;ue(k.x*E);ne("beforeResize");if(h!==undefined){var n,a,f;for(var u=0;u<l;u++){n=R[u];fe((u+h)*k.x,n.el.style);f=p+u-1;if(s.loop&&nt()>2){f=ee(f)}a=tt(f);if(a&&(A||a.needsUpdate||!a.bounds)){r.cleanSlide(a);r.setContent(n,f);if(u===1){r.currItem=a;r.updateCurrZoomItem(true)}a.needsUpdate=false}else if(n.index===-1&&f>=0){r.setContent(n,f)}if(a&&a.container){lt(a,I);ct(a);se(a)}}A=false}D=C=r.currItem.initialZoomLevel;fi=r.currItem.bounds;if(fi){x.x=fi.center.x;x.y=fi.center.y;le(true)}ne("resize")},zoomTo:function(e,i,t,n,r){if(i){D=C;pi.x=Math.abs(i.x)-x.x;pi.y=Math.abs(i.y)-x.y;de(y,x)}var a=xe(e,false),l={};be("x",a,l,e);be("y",a,l,e);var s=C;var f={x:x.x,y:x.y};pe(l);var u=function(i){if(i===1){C=e;x.x=l.x;x.y=l.y}else{C=(e-s)*i+s;x.x=(l.x-f.x)*i+f.x;x.y=(l.y-f.y)*i+f.y}if(r){r(i)}le(i===1)};if(t){ke("customZoomTo",0,1,t,n||o.easing.sine.inOut,u)}else{u(1)}}};var Ze=30,Pe=10;var Fe,Le,_e={},ze={},Ne={},Ue={},He={},Ye=[],Be={},We,Ge=[],Xe={},Ve,Ke,qe,$e=0,je=f(),Je=0,Qe,ei,ii,ti,ni,oi,ri,ai,li,si,fi,ui=f(),ci,di,pi=f(),mi=f(),hi,vi,yi,xi,gi,wi=function(e,i){return e.x===i.x&&e.y===i.y},bi=function(e,i){return Math.abs(e.x-i.x)<a&&Math.abs(e.y-i.y)<a},Ii=function(e,i){Xe.x=Math.abs(e.x-i.x);Xe.y=Math.abs(e.y-i.y);return Math.sqrt(Xe.x*Xe.x+Xe.y*Xe.y)},Ci=function(){if(ni){G(ni);ni=null}},Di=function(){if(Qe){ni=W(Di);Hi()}},Mi=function(){return!(s.scaleMode==="fit"&&C===r.currItem.initialZoomLevel)},Ti=function(e,i){if(!e||e===document){return false}if(e.getAttribute("class")&&e.getAttribute("class").indexOf("pswp__scroll-wrap")>-1){return false}if(i(e)){return e}return Ti(e.parentNode,i)},Si={},Ai=function(e,i){Si.prevent=!Ti(e.target,s.isClickableElement);ne("preventDragEvent",e,i,Si);return Si.prevent},Ei=function(e,i){i.x=e.pageX;i.y=e.pageY;i.id=e.identifier;return i},Oi=function(e,i,t){t.x=(e.x+i.x)*.5;t.y=(e.y+i.y)*.5},ki=function(e,i,t){if(e-Le>50){var n=Ge.length>2?Ge.shift():{};n.x=i;n.y=t;Ge.push(n);Le=e}},Ri=function(){var e=x.y-r.currItem.initialPosition.y;return 1-Math.abs(e/(I.y/2))},Zi={},Pi={},Fi=[],Li,_i=function(e){while(Fi.length>0){Fi.pop()}if(!U){if(e.type.indexOf("touch")>-1){if(e.touches&&e.touches.length>0){Fi[0]=Ei(e.touches[0],Zi);if(e.touches.length>1){Fi[1]=Ei(e.touches[1],Pi)}}}else{Zi.x=e.pageX;Zi.y=e.pageY;Zi.id="";Fi[0]=Zi}}else{Li=0;Ye.forEach(function(e){if(Li===0){Fi[0]=e}else if(Li===1){Fi[1]=e}Li++})}return Fi},zi=function(e,i){var t,n=0,o=x[e]+i[e],a,l=i[e]>0,f=ui.x+i.x,u=ui.x-Be.x,c,d;if(o>fi.min[e]||o<fi.max[e]){t=s.panEndFriction}else{t=1}o=x[e]+i[e]*t;if(s.allowPanToNext||C===r.currItem.initialZoomLevel){if(!ci){d=f}else if(hi==="h"&&e==="x"&&!ii){if(l){if(o>fi.min[e]){t=s.panEndFriction;n=fi.min[e]-o;a=fi.min[e]-y[e]}if((a<=0||u<0)&&nt()>1){d=f;if(u<0&&f>Be.x){d=Be.x}}else{if(fi.min.x!==fi.max.x){c=o}}}else{if(o<fi.max[e]){t=s.panEndFriction;n=o-fi.max[e];a=y[e]-fi.max[e]}if((a<=0||u>0)&&nt()>1){d=f;if(u>0&&f<Be.x){d=Be.x}}else{if(fi.min.x!==fi.max.x){c=o}}}}if(e==="x"){if(d!==undefined){ue(d,true);if(d===Be.x){oi=false}else{oi=true}}if(fi.min.x!==fi.max.x){if(c!==undefined){x.x=c}else if(!oi){x.x+=i.x*t}}return d!==undefined}}if(!di){if(!oi){if(C>r.currItem.fitRatio){x[e]+=i[e]*t}}}},Ni=function(e){if(e.type==="mousedown"&&e.button>0){return}if(et){e.preventDefault();return}if(qe&&e.type==="mousedown"){return}if(Ai(e,true)){e.preventDefault()}ne("pointerDown");if(U){var i=o.arraySearch(Ye,e.pointerId,"id");if(i<0){i=Ye.length}Ye[i]={x:e.pageX,y:e.pageY,id:e.pointerId}}var t=_i(e),n=t.length;ri=null;Oe();if(!Qe||n===1){Qe=vi=true;o.bind(window,g,r);Ve=gi=yi=Ke=oi=ti=ei=ii=false;hi=null;ne("firstTouchStart",t);de(y,x);v.x=v.y=0;de(Ue,t[0]);de(He,Ue);Be.x=k.x*E;Ge=[{x:Ue.x,y:Ue.y}];Le=Fe=oe();xe(C,true);Ci();Di()}if(!ai&&n>1&&!di&&!oi){D=C;ii=false;ai=ei=true;v.y=v.x=0;de(y,x);de(_e,t[0]);de(ze,t[1]);Oi(_e,ze,mi);pi.x=Math.abs(mi.x)-x.x;pi.y=Math.abs(mi.y)-x.y;li=si=Ii(_e,ze)}},Ui=function(e){e.preventDefault();if(U){var i=o.arraySearch(Ye,e.pointerId,"id");if(i>-1){var t=Ye[i];t.x=e.pageX;t.y=e.pageY}}if(Qe){var n=_i(e);if(!hi&&!ti&&!ai){if(ui.x!==k.x*E){hi="h"}else{var r=Math.abs(n[0].x-Ue.x)-Math.abs(n[0].y-Ue.y);if(Math.abs(r)>=Pe){hi=r>0?"h":"v";ri=n}}}else{ri=n}}},Hi=function(){if(!ri){return}var e=ri.length;if(e===0){return}de(_e,ri[0]);Ne.x=_e.x-Ue.x;Ne.y=_e.y-Ue.y;if(ai&&e>1){Ue.x=_e.x;Ue.y=_e.y;if(!Ne.x&&!Ne.y&&wi(ri[1],ze)){return}de(ze,ri[1]);if(!ii){ii=true;ne("zoomGestureStarted")}var i=Ii(_e,ze);var t=Xi(i);if(t>r.currItem.initialZoomLevel+r.currItem.initialZoomLevel/15){gi=true}var n=1,o=ge(),a=we();if(t<o){if(s.pinchToClose&&!gi&&D<=r.currItem.initialZoomLevel){var l=o-t;var f=1-l/(o/1.2);re(f);ne("onPinchClose",f);yi=true}else{n=(o-t)/o;if(n>1){n=1}t=o-n*(o/3)}}else if(t>a){n=(t-a)/(o*6);if(n>1){n=1}t=a+n*o}if(n<0){n=0}li=i;Oi(_e,ze,je);v.x+=je.x-mi.x;v.y+=je.y-mi.y;de(mi,je);x.x=ce("x",t);x.y=ce("y",t);Ve=t>C;C=t;le()}else{if(!hi){return}if(vi){vi=false;if(Math.abs(Ne.x)>=Pe){Ne.x-=ri[0].x-He.x}if(Math.abs(Ne.y)>=Pe){Ne.y-=ri[0].y-He.y}}Ue.x=_e.x;Ue.y=_e.y;if(Ne.x===0&&Ne.y===0){return}if(hi==="v"&&s.closeOnVerticalDrag){if(!Mi()){v.y+=Ne.y;x.y+=Ne.y;var u=Ri();Ke=true;ne("onVerticalDrag",u);re(u);le();return}}ki(oe(),_e.x,_e.y);ti=true;fi=r.currItem.bounds;var c=zi("x",Ne);if(!c){zi("y",Ne);pe(x);le()}}},Yi=function(e){if($.isOldAndroid){if(qe&&e.type==="mouseup"){return}if(e.type.indexOf("touch")>-1){clearTimeout(qe);qe=setTimeout(function(){qe=0},600)}}ne("pointerUp");if(Ai(e,false)){e.preventDefault()}var i;if(U){var t=o.arraySearch(Ye,e.pointerId,"id");if(t>-1){i=Ye.splice(t,1)[0];if(navigator.pointerEnabled){i.type=e.pointerType||"mouse"}else{var n={4:"mouse",2:"touch",3:"pen"};i.type=n[e.pointerType];if(!i.type){i.type=e.pointerType||"mouse"}}}}var a=_i(e),l,f=a.length;if(e.type==="mouseup"){f=0}if(f===2){ri=null;return true}if(f===1){de(He,a[0])}if(f===0&&!hi&&!di){if(!i){if(e.type==="mouseup"){i={x:e.pageX,y:e.pageY,type:"mouse"}}else if(e.changedTouches&&e.changedTouches[0]){i={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,type:"touch"}}}ne("touchRelease",e,i)}var u=-1;if(f===0){Qe=false;o.unbind(window,g,r);Ci();if(ai){u=0}else if(Je!==-1){u=oe()-Je}}Je=f===1?oe():-1;if(u!==-1&&u<150){l="zoom"}else{l="swipe"}if(ai&&f<2){ai=false;if(f===1){l="zoomPointerUp"}ne("zoomGestureEnded")}ri=null;if(!ti&&!ii&&!di&&!Ke){return}Oe();if(!We){We=Bi()}We.calculateSwipeSpeed("x");if(Ke){var c=Ri();if(c<s.verticalDragRange){r.close()}else{var d=x.y,p=xi;ke("verticalDrag",0,1,300,o.easing.cubic.out,function(e){x.y=(r.currItem.initialPosition.y-d)*e+d;re((1-p)*e+p);le()});ne("onVerticalDrag",1)}return}if((oi||di)&&f===0){var m=Gi(l,We);if(m){return}l="zoomPointerUp"}if(di){return}if(l!=="swipe"){Vi();return}if(!oi&&C>r.currItem.fitRatio){Wi(We)}},Bi=function(){var e,i;var t={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(n){if(Ge.length>1){e=oe()-Le+50;i=Ge[Ge.length-2][n]}else{e=oe()-Fe;i=He[n]}t.lastFlickOffset[n]=Ue[n]-i;t.lastFlickDist[n]=Math.abs(t.lastFlickOffset[n]);if(t.lastFlickDist[n]>20){t.lastFlickSpeed[n]=t.lastFlickOffset[n]/e}else{t.lastFlickSpeed[n]=0}if(Math.abs(t.lastFlickSpeed[n])<.1){t.lastFlickSpeed[n]=0}t.slowDownRatio[n]=.95;t.slowDownRatioReverse[n]=1-t.slowDownRatio[n];t.speedDecelerationRatio[n]=1},calculateOverBoundsAnimOffset:function(e,i){if(!t.backAnimStarted[e]){if(x[e]>fi.min[e]){t.backAnimDestination[e]=fi.min[e]}else if(x[e]<fi.max[e]){t.backAnimDestination[e]=fi.max[e]}if(t.backAnimDestination[e]!==undefined){t.slowDownRatio[e]=.7;t.slowDownRatioReverse[e]=1-t.slowDownRatio[e];if(t.speedDecelerationRatioAbs[e]<.05){t.lastFlickSpeed[e]=0;t.backAnimStarted[e]=true;ke("bounceZoomPan"+e,x[e],t.backAnimDestination[e],i||300,o.easing.sine.out,function(i){x[e]=i;le()})}}}},calculateAnimOffset:function(e){if(!t.backAnimStarted[e]){t.speedDecelerationRatio[e]=t.speedDecelerationRatio[e]*(t.slowDownRatio[e]+t.slowDownRatioReverse[e]-t.slowDownRatioReverse[e]*t.timeDiff/10);t.speedDecelerationRatioAbs[e]=Math.abs(t.lastFlickSpeed[e]*t.speedDecelerationRatio[e]);t.distanceOffset[e]=t.lastFlickSpeed[e]*t.speedDecelerationRatio[e]*t.timeDiff;x[e]+=t.distanceOffset[e]}},panAnimLoop:function(){if(Te.zoomPan){Te.zoomPan.raf=W(t.panAnimLoop);t.now=oe();t.timeDiff=t.now-t.lastNow;t.lastNow=t.now;t.calculateAnimOffset("x");t.calculateAnimOffset("y");le();t.calculateOverBoundsAnimOffset("x");t.calculateOverBoundsAnimOffset("y");if(t.speedDecelerationRatioAbs.x<.05&&t.speedDecelerationRatioAbs.y<.05){x.x=Math.round(x.x);x.y=Math.round(x.y);le();Ae("zoomPan");return}}}};return t},Wi=function(e){e.calculateSwipeSpeed("y");fi=r.currItem.bounds;e.backAnimDestination={};e.backAnimStarted={};if(Math.abs(e.lastFlickSpeed.x)<=.05&&Math.abs(e.lastFlickSpeed.y)<=.05){e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0;e.calculateOverBoundsAnimOffset("x");e.calculateOverBoundsAnimOffset("y");return true}Ee("zoomPan");e.lastNow=oe();e.panAnimLoop()},Gi=function(e,i){var t;if(!di){$e=p}var n;if(e==="swipe"){var a=Ue.x-He.x,l=i.lastFlickDist.x<10;if(a>Ze&&(l||i.lastFlickOffset.x>20)){n=-1}else if(a<-Ze&&(l||i.lastFlickOffset.x<-20)){n=1}}var f;if(n){p+=n;if(p<0){p=s.loop?nt()-1:0;f=true}else if(p>=nt()){p=s.loop?0:nt()-1;f=true}if(!f||s.loop){P+=n;E-=n;t=true}}var u=k.x*E;var c=Math.abs(u-ui.x);var d;if(!t&&u>ui.x!==i.lastFlickSpeed.x>0){d=333}else{d=Math.abs(i.lastFlickSpeed.x)>0?c/Math.abs(i.lastFlickSpeed.x):333;d=Math.min(d,400);d=Math.max(d,250)}if($e===p){t=false}di=true;ne("mainScrollAnimStart");ke("mainScroll",ui.x,u,d,o.easing.cubic.out,ue,function(){Oe();di=false;$e=-1;if(t||$e!==p){r.updateCurrItem()}ne("mainScrollAnimComplete")});if(t){r.updateCurrItem(true)}return t},Xi=function(e){return 1/si*e*D},Vi=function(){var e=C,i=ge(),t=we();if(C<i){e=i}else if(C>t){e=t}var n=1,a,l=xi;if(yi&&!Ve&&!gi&&C<i){r.close();return true}if(yi){a=function(e){re((n-l)*e+l)}}r.zoomTo(e,0,200,o.easing.cubic.out,a);return true};Q("Gestures",{publicMethods:{initGestures:function(){var e=function(e,i,t,n,o){F=e+i;L=e+t;_=e+n;if(o){z=e+o}else{z=""}};U=$.pointerEvent;if(U&&$.touch){$.touch=false}if(U){if(navigator.pointerEnabled){e("pointer","down","move","up","cancel")}else{e("MSPointer","Down","Move","Up","Cancel")}}else if($.touch){e("touch","start","move","end","cancel");Y=true}else{e("mouse","down","move","up")}g=L+" "+_+" "+z;w=F;if(U&&!Y){Y=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1}r.likelyTouchDevice=Y;b[F]=Ni;b[L]=Ui;b[_]=Yi;if(z){b[z]=b[_]}if($.touch){w+=" mousedown";g+=" mousemove mouseup";b.mousedown=b[F];b.mousemove=b[L];b.mouseup=b[_]}if(!Y){s.allowPanToNext=false}}}});var Ki,qi=function(i,t,n,a){if(Ki){clearTimeout(Ki)}et=true;Qi=true;var l;if(i.initialLayout){l=i.initialLayout;i.initialLayout=null}else{l=s.getThumbBoundsFn&&s.getThumbBoundsFn(p)}var f=n?s.hideAnimationDuration:s.showAnimationDuration;var u=function(){Ae("initialZoom");if(!n){re(1);if(t){t.style.display="block"}o.addClass(e,"pswp--animated-in");ne("initialZoom"+(n?"OutEnd":"InEnd"))}else{r.template.removeAttribute("style");r.bg.removeAttribute("style")}if(a){a()}et=false};if(!f||!l||l.x===undefined){ne("initialZoom"+(n?"Out":"In"));C=i.initialZoomLevel;de(x,i.initialPosition);le();e.style.opacity=n?0:1;re(1);if(f){setTimeout(function(){u()},f)}else{u()}return}var c=function(){var t=d,a=!r.currItem.src||r.currItem.loadError||s.showHideOpacity;if(i.miniImg){i.miniImg.style.webkitBackfaceVisibility="hidden"}if(!n){C=l.w/i.w;x.x=l.x;x.y=l.y-V;r[a?"template":"bg"].style.opacity=.001;le()}Ee("initialZoom");if(n&&!t){o.removeClass(e,"pswp--animated-in")}if(a){if(n){o[(t?"remove":"add")+"Class"](e,"pswp--animate_opacity")}else{setTimeout(function(){o.addClass(e,"pswp--animate_opacity")},30)}}Ki=setTimeout(function(){ne("initialZoom"+(n?"Out":"In"));if(!n){C=i.initialZoomLevel;de(x,i.initialPosition);le();re(1);if(a){e.style.opacity=1}else{re(1)}Ki=setTimeout(u,f+20)}else{var r=l.w/i.w,s={x:x.x,y:x.y},c=C,d=xi,p=function(i){if(i===1){C=r;x.x=l.x;x.y=l.y-q}else{C=(r-c)*i+c;x.x=(l.x-s.x)*i+s.x;x.y=(l.y-q-s.y)*i+s.y}le();if(a){e.style.opacity=1-i}else{re(d-i*d)}};if(t){ke("initialZoom",0,1,f,o.easing.cubic.out,p,u)}else{p(1);Ki=setTimeout(u,f+20)}}},n?25:90)};c()};var $i,ji={},Ji=[],Qi,et,it={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:false,preload:[1,1],getNumItemsFn:function(){return $i.length}};var tt,nt,ot,rt=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},at=function(e,i,t){var n=e.bounds;n.center.x=Math.round((ji.x-i)/2);n.center.y=Math.round((ji.y-t)/2)+e.vGap.top;n.max.x=i>ji.x?Math.round(ji.x-i):n.center.x;n.max.y=t>ji.y?Math.round(ji.y-t)+e.vGap.top:n.center.y;n.min.x=i>ji.x?0:n.center.x;n.min.y=t>ji.y?e.vGap.top:n.center.y},lt=function(e,i,t){if(e.src&&!e.loadError){var n=!t;if(n){if(!e.vGap){e.vGap={top:0,bottom:0}}ne("parseVerticalMargin",e)}ji.x=i.x;ji.y=i.y-e.vGap.top-e.vGap.bottom;if(n){var o=ji.x/e.w;var r=ji.y/e.h;e.fitRatio=o<r?o:r;var a=s.scaleMode;if(a==="orig"){t=1}else if(a==="fit"){t=e.fitRatio}if(t>1){t=1}e.initialZoomLevel=t;if(!e.bounds){e.bounds=rt()}}if(!t){return}at(e,e.w*t,e.h*t);if(n&&t===e.initialZoomLevel){e.initialPosition=e.bounds.center}return e.bounds}else{e.w=e.h=0;e.initialZoomLevel=e.fitRatio=1;e.bounds=rt();e.initialPosition=e.bounds.center;return e.bounds}},st=function(e,i,t,n,o,a){if(i.loadError){return}if(n){i.imageAppended=true;ct(i,n,i===r.currItem&&J);t.appendChild(n);if(a){setTimeout(function(){if(i&&i.loaded&&i.placeholder){i.placeholder.style.display="none";i.placeholder=null}},500)}}},ft=function(e){e.loading=true;e.loaded=false;var i=e.img=o.createEl("pswp__img","img");var t=function(){e.loading=false;e.loaded=true;if(e.loadComplete){e.loadComplete(e)}else{e.img=null}i.onload=i.onerror=null;i=null};i.onload=t;i.onerror=function(){e.loadError=true;t()};i.src=e.src;return i},ut=function(e,i){if(e.src&&e.loadError&&e.container){if(i){e.container.innerHTML=""}e.container.innerHTML=s.errorMsg.replace("%url%",e.src);return true}},ct=function(e,i,t){if(!e.src){return}if(!i){i=e.container.lastChild}var n=t?e.w:Math.round(e.w*e.fitRatio),o=t?e.h:Math.round(e.h*e.fitRatio);if(e.placeholder&&!e.loaded){e.placeholder.style.width=n+"px";e.placeholder.style.height=o+"px"}i.style.width=n+"px";i.style.height=o+"px"},dt=function(){if(Ji.length){var e;for(var i=0;i<Ji.length;i++){e=Ji[i];if(e.holder.index===e.index){st(e.index,e.item,e.baseDiv,e.img,false,e.clearPlaceholder)}}Ji=[]}};Q("Controller",{publicMethods:{lazyLoadItem:function(e){e=ee(e);var i=tt(e);if(!i||(i.loaded||i.loading)&&!A){return}ne("gettingData",e,i);if(!i.src){return}ft(i)},initController:function(){o.extend(s,it,true);r.items=$i=t;tt=r.getItemAt;nt=s.getNumItemsFn;ot=s.loop;if(nt()<3){s.loop=false}te("beforeChange",function(e){var i=s.preload,t=e===null?true:e>=0,n=Math.min(i[0],nt()),o=Math.min(i[1],nt()),a;for(a=1;a<=(t?o:n);a++){r.lazyLoadItem(p+a)}for(a=1;a<=(t?n:o);a++){r.lazyLoadItem(p-a)}});te("initialLayout",function(){r.currItem.initialLayout=s.getThumbBoundsFn&&s.getThumbBoundsFn(p)});te("mainScrollAnimComplete",dt);te("initialZoomInEnd",dt);te("destroy",function(){var e;for(var i=0;i<$i.length;i++){e=$i[i];if(e.container){e.container=null}if(e.placeholder){e.placeholder=null}if(e.img){e.img=null}if(e.preloader){e.preloader=null}if(e.loadError){e.loaded=e.loadError=false}}Ji=null})},getItemAt:function(e){if(e>=0){return $i[e]!==undefined?$i[e]:false}return false},allowProgressiveImg:function(){return s.forceProgressiveLoading||!Y||s.mouseUsed||screen.width>1200},setContent:function(e,i){if(s.loop){i=ee(i)}var t=r.getItemAt(e.index);if(t){t.container=null}var n=r.getItemAt(i),a;if(!n){e.el.innerHTML="";return}ne("gettingData",i,n);e.index=i;e.item=n;var l=n.container=o.createEl("pswp__zoom-wrap");if(!n.src&&n.html){if(n.html.tagName){l.appendChild(n.html)}else{l.innerHTML=n.html}}ut(n);lt(n,I);if(n.src&&!n.loadError&&!n.loaded){n.loadComplete=function(t){if(!u){return}if(e&&e.index===i){if(ut(t,true)){t.loadComplete=t.img=null;lt(t,I);se(t);if(e.index===p){r.updateCurrZoomItem()}return}if(!t.imageAppended){if($.transform&&(di||et)){Ji.push({item:t,baseDiv:l,img:t.img,index:i,holder:e,clearPlaceholder:true})}else{st(i,t,l,t.img,di||et,true)}}else{if(!et&&t.placeholder){t.placeholder.style.display="none";t.placeholder=null}}}t.loadComplete=null;t.img=null;ne("imageLoadComplete",i,t)};if(o.features.transform){var f="pswp__img pswp__img--placeholder";f+=n.msrc?"":" pswp__img--placeholder--blank";var c=o.createEl(f,n.msrc?"img":"");if(n.msrc){c.src=n.msrc}ct(n,c);l.appendChild(c);n.placeholder=c}if(!n.loading){ft(n)}if(r.allowProgressiveImg()){if(!Qi&&$.transform){Ji.push({item:n,baseDiv:l,img:n.img,index:i,holder:e})}else{st(i,n,l,n.img,true,true)}}}else if(n.src&&!n.loadError){a=o.createEl("pswp__img","img");a.style.opacity=1;a.src=n.src;ct(n,a);st(i,n,l,a,true)}if(!Qi&&i===p){ci=l.style;qi(n,a||n.img)}else{se(n)}e.el.innerHTML="";e.el.appendChild(l)},cleanSlide:function(e){if(e.img){e.img.onload=e.img.onerror=null}e.loaded=e.loading=e.img=e.imageAppended=false}}});var pt,mt={},ht=function(e,i,t){var n=document.createEvent("CustomEvent"),o={origEvent:e,target:e.target,releasePoint:i,pointerType:t||"touch"};n.initCustomEvent("pswpTap",true,true,o);e.target.dispatchEvent(n)};Q("Tap",{publicMethods:{initTap:function(){te("firstTouchStart",r.onTapStart);te("touchRelease",r.onTapRelease);te("destroy",function(){mt={};pt=null})},onTapStart:function(e){if(e.length>1){clearTimeout(pt);pt=null}},onTapRelease:function(e,i){if(!i){return}if(!ti&&!ei&&!Se){var t=i;if(pt){clearTimeout(pt);pt=null;if(bi(t,mt)){ne("doubleTap",t);return}}if(i.type==="mouse"){ht(e,i,"mouse");return}var n=e.target.tagName.toUpperCase();if(n==="BUTTON"||o.hasClass(e.target,"pswp__single-tap")){ht(e,i);return}de(mt,t);pt=setTimeout(function(){ht(e,i);pt=null},300)}}}});var vt;Q("DesktopZoom",{publicMethods:{initDesktopZoom:function(){if(K){return}if(Y){te("mouseUsed",function(){r.setupDesktopZoom()})}else{r.setupDesktopZoom(true)}},setupDesktopZoom:function(i){vt={};var t="wheel mousewheel DOMMouseScroll";te("bindEvents",function(){o.bind(e,t,r.handleMouseWheel)});te("unbindEvents",function(){if(vt){o.unbind(e,t,r.handleMouseWheel)}});r.mouseZoomedIn=false;var n,a=function(){if(r.mouseZoomedIn){o.removeClass(e,"pswp--zoomed-in");r.mouseZoomedIn=false}if(C<1){o.addClass(e,"pswp--zoom-allowed")}else{o.removeClass(e,"pswp--zoom-allowed")}l()},l=function(){if(n){o.removeClass(e,"pswp--dragging");n=false}};te("resize",a);te("afterChange",a);te("pointerDown",function(){if(r.mouseZoomedIn){n=true;o.addClass(e,"pswp--dragging")}});te("pointerUp",l);if(!i){a()}},handleMouseWheel:function(e){if(C<=r.currItem.fitRatio){if(s.modal){if(!s.closeOnScroll||Se||Qe){e.preventDefault()}else if(N&&Math.abs(e.deltaY)>2){d=true;r.close()}}return true}e.stopPropagation();vt.x=0;if("deltaX"in e){if(e.deltaMode===1){vt.x=e.deltaX*18;vt.y=e.deltaY*18}else{vt.x=e.deltaX;vt.y=e.deltaY}}else if("wheelDelta"in e){if(e.wheelDeltaX){vt.x=-.16*e.wheelDeltaX}if(e.wheelDeltaY){vt.y=-.16*e.wheelDeltaY}else{vt.y=-.16*e.wheelDelta}}else if("detail"in e){vt.y=e.detail}else{return}xe(C,true);var i=x.x-vt.x,t=x.y-vt.y;if(s.modal||i<=fi.min.x&&i>=fi.max.x&&t<=fi.min.y&&t>=fi.max.y){e.preventDefault()}r.panTo(i,t)},toggleDesktopZoom:function(i){i=i||{x:I.x/2+O.x,y:I.y/2+O.y};var t=s.getDoubleTapZoom(true,r.currItem);var n=C===t;r.mouseZoomedIn=!n;r.zoomTo(n?r.currItem.initialZoomLevel:t,i,333);o[(!n?"add":"remove")+"Class"](e,"pswp--zoomed-in")}}});var yt={history:true,galleryUID:1};var xt,gt,wt,bt,It,Ct,Dt,Mt,Tt,St,At,Et,Ot=function(){return At.hash.substring(1)},kt=function(){if(xt){clearTimeout(xt)}if(wt){clearTimeout(wt)}},Rt=function(){var e=Ot(),i={};if(e.length<5){return i}var t,n=e.split("&");for(t=0;t<n.length;t++){if(!n[t]){continue}var o=n[t].split("=");if(o.length<2){continue}i[o[0]]=o[1]}if(s.galleryPIDs){var r=i.pid;i.pid=0;for(t=0;t<$i.length;t++){if($i[t].pid===r){i.pid=t;break}}}else{i.pid=parseInt(i.pid,10)-1}if(i.pid<0){i.pid=0}return i},Zt=function(){if(wt){clearTimeout(wt)}if(Se||Qe){wt=setTimeout(Zt,500);return}if(bt){clearTimeout(gt)}else{bt=true}var e=p+1;var i=tt(p);if(i.hasOwnProperty("pid")){e=i.pid}var t=Dt+"&"+"gid="+s.galleryUID+"&"+"pid="+e;if(!Mt){if(At.hash.indexOf(t)===-1){
St=true}}var n=At.href.split("#")[0]+"#"+t;if(Et){if("#"+t!==window.location.hash){history[Mt?"replaceState":"pushState"]("",document.title,n)}}else{if(Mt){At.replace(n)}else{At.hash=t}}Mt=true;gt=setTimeout(function(){bt=false},60)};Q("History",{publicMethods:{initHistory:function(){o.extend(s,yt,true);if(!s.history){return}At=window.location;St=false;Tt=false;Mt=false;Dt=Ot();Et="pushState"in history;if(Dt.indexOf("gid=")>-1){Dt=Dt.split("&gid=")[0];Dt=Dt.split("?gid=")[0]}te("afterChange",r.updateURL);te("unbindEvents",function(){o.unbind(window,"hashchange",r.onHashChange)});var e=function(){Ct=true;if(!Tt){if(St){history.back()}else{if(Dt){At.hash=Dt}else{if(Et){history.pushState("",document.title,At.pathname+At.search)}else{At.hash=""}}}}kt()};te("unbindEvents",function(){if(d){e()}});te("destroy",function(){if(!Ct){e()}});te("firstUpdate",function(){p=Rt().pid});var i=Dt.indexOf("pid=");if(i>-1){Dt=Dt.substring(0,i);if(Dt.slice(-1)==="&"){Dt=Dt.slice(0,-1)}}setTimeout(function(){if(u){o.bind(window,"hashchange",r.onHashChange)}},40)},onHashChange:function(){if(Ot()===Dt){Tt=true;r.close();return}if(!bt){It=true;r.goTo(Rt().pid);It=false}},updateURL:function(){kt();if(It){return}if(!Mt){Zt()}else{xt=setTimeout(Zt,800)}}}});o.extend(r,Re)};return e});
//rebuild by neat 